<div class="container">
  <h1>🚀 Business Intelligence RAG System</h1>
  
  <div class="api-status">
    <h2>📊 API Status</h2>
    <div class="status-card" [class]="apiStatus.healthy ? 'healthy' : 'unhealthy'">
      <p><strong>Status:</strong> {{ apiStatus.healthy ? 'Healthy' : 'Unhealthy' }}</p>
      <p><strong>Last Check:</strong> {{ apiStatus.timestamp | date:'short' }}</p>
      <button (click)="checkApiHealth()">Refresh Status</button>
    </div>
  </div>

  <div class="upload-section">
    <h2>📄 Document Analysis</h2>
    
    <div class="upload-card">
      <h3>PDF Analysis</h3>
      <input type="file" #fileInput accept=".pdf" (change)="onFileSelected($event, 'pdf')">
      <button [disabled]="!selectedFile" (click)="analyzeDocument('pdf')">
        {{ isProcessing ? 'Analyzing...' : 'Analyze PDF' }}
      </button>
    </div>
    
    <div class="upload-card">
      <h3>CSV Analysis</h3>
      <input type="file" #csvInput accept=".csv" (change)="onFileSelected($event, 'csv')">
      <button [disabled]="!selectedFile" (click)="analyzeDocument('csv')">
        {{ isProcessing ? 'Analyzing...' : 'Analyze CSV' }}
      </button>
    </div>
  </div>

  <div class="results-section" *ngIf="analysisResult">
    <h2>📈 Analysis Results</h2>
    <div class="result-card">
      <pre>{{ analysisResult | json }}</pre>
    </div>
  </div>

  <div class="error-section" *ngIf="errorMessage">
    <h2>❌ Error</h2>
    <div class="error-card">
      <p>{{ errorMessage }}</p>
      <button (click)="clearError()">Clear</button>
    </div>
  </div>
</div>